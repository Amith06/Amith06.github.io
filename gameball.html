<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bounce Classic Game</title>
  <style>
    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(to bottom, #87ceeb, #fff);
      font-family: Arial, sans-serif;
    }
    canvas {
      background: #cce7ff;
      border: 2px solid #000;
    }
    .controls {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    .btn {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: none;
      background: #444;
      color: white;
      font-size: 22px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }
    .btn:active {
      background: #666;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="700" height="400"></canvas>

  <!-- Mobile Buttons -->
  <div class="controls">
    <button class="btn" id="left">‚¨ÖÔ∏è</button>
    <button class="btn" id="jump">‚§¥Ô∏è</button>
    <button class="btn" id="right">‚û°Ô∏è</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let level = 1;

    let ball = {
      x: 50,
      y: 300,
      radius: 18,
      color: "red",
      dx: 0,
      dy: 0,
      speed: 0.5,
      jumpPower: -12,
      gravity: 0.6,
      friction: 0.9,
      onGround: false
    };

    const groundHeight = 50;

    // Levels (10 total with spikes)
    const levels = {
      1: { platforms: [{x:150,y:300,w:120,h:15}], spikes: [], portal:{x:600,y:270,r:15} },
      2: { platforms: [{x:200,y:250,w:120,h:15},{x:400,y:200,w:120,h:15}], spikes:[{x:320,y:350}], portal:{x:650,y:170,r:15} },
      3: { platforms: [{x:100,y:250,w:100,h:15},{x:300,y:200,w:100,h:15},{x:500,y:150,w:100,h:15}], spikes:[{x:250,y:350},{x:450,y:350}], portal:{x:650,y:120,r:15} },
      4: { platforms: [{x:120,y:280,w:120,h:15},{x:350,y:230,w:120,h:15},{x:550,y:180,w:120,h:15}], spikes:[{x:200,y:350},{x:380,y:350}], portal:{x:650,y:150,r:15} },
      5: { platforms: [{x:180,y:300,w:120,h:15},{x:380,y:250,w:120,h:15}], spikes:[{x:250,y:350},{x:500,y:350},{x:600,y:350}], portal:{x:650,y:220,r:15} },
      6: { platforms: [{x:120,y:270,w:100,h:15},{x:300,y:220,w:100,h:15},{x:480,y:180,w:100,h:15}], spikes:[{x:200,y:350},{x:400,y:350}], portal:{x:650,y:150,r:15} },
      7: { platforms: [{x:150,y:300,w:100,h:15},{x:320,y:260,w:100,h:15},{x:500,y:220,w:100,h:15}], spikes:[{x:220,y:350},{x:420,y:350},{x:600,y:350}], portal:{x:650,y:200,r:15} },
      8: { platforms: [{x:180,y:280,w:100,h:15},{x:360,y:240,w:100,h:15},{x:540,y:200,w:100,h:15}], spikes:[{x:250,y:350},{x:450,y:350},{x:650,y:350}], portal:{x:650,y:170,r:15} },
      9: { platforms: [{x:150,y:260,w:100,h:15},{x:300,y:220,w:100,h:15},{x:450,y:180,w:100,h:15},{x:600,y:140,w:100,h:15}], spikes:[{x:200,y:350},{x:350,y:350},{x:500,y:350}], portal:{x:650,y:110,r:15} },
      10:{ platforms: [{x:120,y:280,w:100,h:15},{x:280,y:240,w:100,h:15},{x:440,y:200,w:100,h:15},{x:600,y:160,w:100,h:15}], spikes:[{x:180,y:350},{x:360,y:350},{x:540,y:350},{x:650,y:350}], portal:{x:650,y:120,r:15} }
    };

    let keys = {};

    // Keyboard
    document.addEventListener("keydown", (e) => keys[e.code] = true);
    document.addEventListener("keyup", (e) => keys[e.code] = false);

    // Mobile buttons
    document.getElementById("left").addEventListener("touchstart", () => keys["ArrowLeft"] = true);
    document.getElementById("left").addEventListener("touchend", () => keys["ArrowLeft"] = false);
    document.getElementById("right").addEventListener("touchstart", () => keys["ArrowRight"] = true);
    document.getElementById("right").addEventListener("touchend", () => keys["ArrowRight"] = false);
    document.getElementById("jump").addEventListener("touchstart", () => {
      if (ball.onGround) {
        ball.dy = ball.jumpPower;
        ball.onGround = false;
      }
    });

    function resetBall() {
      ball.x = 50;
      ball.y = 300;
      ball.dx = 0;
      ball.dy = 0;
    }

    function update() {
      if (keys["ArrowLeft"]) ball.dx -= ball.speed;
      if (keys["ArrowRight"]) ball.dx += ball.speed;
      ball.dx *= ball.friction;

      if (keys["Space"] && ball.onGround) {
        ball.dy = ball.jumpPower;
        ball.onGround = false;
      }

      ball.dy += ball.gravity;
      ball.x += ball.dx;
      ball.y += ball.dy;

      if (ball.x - ball.radius < 0) ball.x = ball.radius;
      if (ball.x + ball.radius > canvas.width) ball.x = canvas.width - ball.radius;

      if (ball.y + ball.radius > canvas.height - groundHeight) {
        ball.y = canvas.height - groundHeight - ball.radius;
        ball.dy = 0;
        ball.onGround = true;
      } else {
        ball.onGround = false;
      }

      // Platforms
      levels[level].platforms.forEach(p => {
        if (ball.x > p.x && ball.x < p.x + p.w &&
            ball.y + ball.radius > p.y && ball.y + ball.radius < p.y + p.h + 15 &&
            ball.dy >= 0) {
          ball.y = p.y - ball.radius;
          ball.dy = 0;
          ball.onGround = true;
        }
      });

      // Spikes
      levels[level].spikes.forEach(s => {
        if (ball.x > s.x && ball.x < s.x+30 &&
            ball.y + ball.radius > s.y) {
          resetBall(); // ball dies & restart
        }
      });

      // Portal
      let portal = levels[level].portal;
      let dx = ball.x - portal.x;
      let dy = ball.y - portal.y;
      let dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < ball.radius + portal.r) {
        if (levels[level+1]) {
          level++;
          resetBall();
        } else {
          alert("üéâ You Win! All 10 Levels Complete!");
          level = 1;
          resetBall();
        }
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "green";
      ctx.fillRect(0, canvas.height - groundHeight, canvas.width, groundHeight);

      ctx.fillStyle = "#8B4513";
      levels[level].platforms.forEach(p => {
        ctx.fillRect(p.x, p.y, p.w, p.h);
      });

      ctx.fillStyle = "black";
      levels[level].spikes.forEach(s => {
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x+15, s.y-20);
        ctx.lineTo(s.x+30, s.y);
        ctx.closePath();
        ctx.fill();
      });

      let portal = levels[level].portal;
      ctx.beginPath();
      ctx.arc(portal.x, portal.y, portal.r, 0, Math.PI*2);
      ctx.fillStyle = "blue";
      ctx.fill();

      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
      ctx.fillStyle = ball.color;
      ctx.fill();
      ctx.stroke();
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
